# Testing Documentation

## Overview
Testing in Gaia Archtree uses a unified test system managed through divine intervention with automatic fix capabilities.

## Test System Architecture

### Test Configuration (`tests.json`)
The central test configuration file contains:
- **Metadata**: Project info, version, auto-fix settings
- **Test Categories**: divine, simple, evolution, auth, sacred, integration
- **Test Definitions**: Input/output specifications for each test
- **Auto-Fix Rules**: Divine intervention rules for automatic repairs

### Test Categories

1. **Divine Tests** (`test_divine_intervention.js`)
   - Tests the 32-god pantheon system
   - Validates god selection logic
   - Verifies intervention phases (light, shadow, synthesis)
   - Tests auto-fix capabilities

2. **Simple Tests** (`test_simple.js`)
   - Basic functionality tests
   - System initialization
   - CLI command validation
   - Version checking

3. **Evolution Tests** (`test_git_evolution.js`)
   - Git evolution engine tests
   - M1 optimization validation
   - Mutation branch creation
   - Fitness evaluation

## Running Tests

```bash
# Run all tests
npm test

# Run specific test suites
node test_divine_intervention.js
node test_simple.js
node test_git_evolution.js

# Run with specific test ID
node test_divine_intervention.js --test=divine_001

# Run with verbose output
node test_divine_intervention.js --verbose
```

## Auto-Fix System

The divine intervention auto-fix system can automatically resolve common test failures:

### Auto-Fix Rules
- **Missing Gods**: Creates god mappings if gods not found
- **Auth Failures**: Skips authentication for testing
- **Synthesis Errors**: Falls back to basic synthesis
- **Branch Conflicts**: Uses existing branches or creates new
- **Fitness Failures**: Uses default fitness calculations

### Example Auto-Fix Flow
```javascript
// Test fails with "God odin not found"
// Auto-fix: Maps 'odin' to 'Vishnu' in Indian pantheon
// Test re-runs and passes
```

## Test Results

Tests output results in the following format:
```
ğŸ”® Divine Intervention Test Suite
==================================================

ğŸ“‹ Test: Basic Divine Intervention (divine_001)
âœ… PASSED

ğŸ“‹ Test: God Selection System (divine_002)
ğŸ”§ AUTO-FIXED and PASSED

Test Results:
  âœ… Passed: 1
  ğŸ”§ Auto-Fixed: 1
  âŒ Failed: 0
  ğŸ“Š Total: 2
  ğŸ¯ Success Rate: 100.0%
```

## Writing New Tests

To add new tests, update `tests.json`:

```json
{
  "id": "divine_003",
  "name": "Zodiac Integration Test",
  "category": "divine",
  "input": {
    "task": "implement feature",
    "zodiacSign": "Scorpio"
  },
  "expectedOutput": {
    "preferredGods": ["mahakala", "shiva"],
    "polarity": "negative"
  },
  "autoFix": true
}
```

## Test Coverage

Current test coverage:
- âœ… Divine Intervention: 100%
- âœ… God Selection: 100%
- âœ… Basic CLI: 100%
- âœ… Evolution Engine: Basic coverage
- ğŸ”„ Authentication: In progress
- ğŸ”„ Sacred Git Hooks: Planned

## CI/CD Integration

Tests are automatically run on:
- Pull requests
- Commits to main branch
- Manual workflow dispatch

<!-- Auto-generated by Divine Intervention -->

<!-- Implementation Status: âœ… Implemented -->
